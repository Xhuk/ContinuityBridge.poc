# ContinuityBridge - Render Deployment Environment Variables

# === Application Domain Configuration ===
# Your production domain (used for magic links, exports, license validation)
APP_URL=https://yourdomain.com
APP_DOMAIN=yourdomain.com
EXPORT_CONTACT_EMAIL=support@yourdomain.com

# === Resend Configuration (Superadmin Emails) ===
# Get API key from: https://resend.com/api-keys
RESEND_API_KEY=re_YOUR_RESEND_API_KEY_HERE
RESEND_FROM_EMAIL=noreply@yourdomain.com
# Note: Domain must be verified in Resend dashboard

# SUPERADMIN Configuration
SUPERADMIN_API_KEY=cb_YOUR_SECURE_SUPERADMIN_KEY_HERE
# Generate with: node -e "console.log('cb_' + require('crypto').randomBytes(32).toString('hex'))"

# === Security Configuration (Production) ===
# Encryption key for sensitive data (credentials, API keys, secrets)
ENCRYPTION_KEY=YOUR_ENCRYPTION_KEY_HERE
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64').slice(0, 32))"

# OAuth2 Configuration (Optional but recommended for production)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=https://yourdomain.com/api/auth/google/callback

# License Validation Server (phone-home validation to prevent clock manipulation)
LICENSE_VALIDATION_URL=https://yourdomain.com/api/license/validate

# Organization
ORGANIZATION_ID=your-org-id
RUNTIME_VERSION=1.0.0

# Node Environment
NODE_ENV=production

# Deployment Type - Render is the Founder/Consultant platform
# "platform" = Founder/Consultant platform (login: /sys/auth/bridge - obscure path)
# "customer" = Customer deployment (login: /admin)
VITE_DEPLOYMENT_TYPE=platform

# === Authentication Configuration ===
# Auth Guard: ALWAYS ENABLED for Founders production instance
# This is the default ContinuityBridge platform (Render/Vercel)
# Customers receive their own deployments with configurable auth guard
AUTH_GUARD_ENABLED=true

# === Logging Configuration ===
LOG_LEVEL=info  # debug | info | warn | error
DB_LOGGING=true  # Store logs in database for web portal access
DEBUG=false  # Enable debug logs

# ============================================================================
# DATABASE CONFIGURATION (PRODUCTION)
# ============================================================================

# Database Type: "postgres" for production (recommended)
DB_TYPE=postgres

# Neon Database (Recommended - Serverless PostgreSQL)
# Get your connection string from: https://console.neon.tech
# Format: postgresql://[user]:[password]@[endpoint].neon.tech/[database]?sslmode=require
DATABASE_URL=postgresql://user:password@your-neon-endpoint.neon.tech/database?sslmode=require

# PostgreSQL Connection Pool (Production Tuning)
DB_POOL_MAX=20          # Maximum connections in pool
DB_POOL_MIN=2           # Minimum idle connections
DB_IDLE_TIMEOUT=30000   # Idle timeout (30 seconds)
DB_CONNECTION_TIMEOUT=10000  # Connection timeout (10 seconds)

# SMTP Settings (Required for magic link authentication)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-gmail-app-password
SMTP_FROM=noreply@yourdomain.com

# === Customer SMTP Configuration ===
# This is configured by customers via the UI at /settings/email
# Used for flow notifications (errors, validations, acks)
# NOT used for superadmin tasks (magic links, invitations)
# Customer configures their own SMTP server in the application

# === AI Assistant Configuration (Optional) ===
# Gemini API for AI-powered consultant assistance
# Free tier: 15 req/min, 1500 req/day
# Get your key from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=YOUR_GEMINI_API_KEY_HERE
# Features: Smart mapping generation, error diagnosis, flow suggestions

# === GitHub Backup Configuration ===
# Automatic backup of customer deployments to GitHub
# Get GitHub Personal Access Token: https://github.com/settings/tokens
# Required scopes: repo (full control of private repositories)
GITHUB_TOKEN=ghp_your_github_personal_access_token
GITHUB_BACKUP_REPO=Xhuk/SFpagelanding
