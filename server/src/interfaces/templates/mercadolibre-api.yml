# MercadoLibre API - Standard Marketplace Interface
# Category: marketplace

id: mercadolibre-api
name: MercadoLibre API
description: Integration with MercadoLibre marketplace for product listings, inventory, and order management
type: marketplace
direction: bidirectional
protocol: rest_api

# Connection details
endpoint: https://api.mercadolibre.com
httpConfig:
  method: POST
  headers:
    Content-Type: application/json
    Accept: application/json
  timeout: 30000
  retryAttempts: 3
  retryDelay: 1000

# Authentication - OAuth2
authType: oauth2
oauth2Config:
  tokenUrl: https://api.mercadolibre.com/oauth/token
  grantType: refresh_token
  scope: ""

# Supported data formats
formats:
  - json
defaultFormat: json

# Required secrets (to be filled by customer)
requiredSecrets:
  - clientId          # MercadoLibre App ID
  - clientSecret      # MercadoLibre Secret Key
  - refreshToken      # OAuth Refresh Token
  - customAuth:
      - userId        # MercadoLibre User ID
      - siteId        # Site ID (MLB=Brazil, MLM=Mexico, MLA=Argentina, etc.)

# Common API endpoints
endpoints:
  createListing:
    path: /items
    method: POST
    description: Create a new product listing
    
  updateListing:
    path: /items/{itemId}
    method: PUT
    description: Update existing product listing
    
  getListing:
    path: /items/{itemId}
    method: GET
    description: Get product details by Item ID
    
  updateStock:
    path: /items/{itemId}
    method: PUT
    description: Update product stock quantity
    
  updatePrice:
    path: /items/{itemId}
    method: PUT
    description: Update product price
    
  pauseListing:
    path: /items/{itemId}
    method: PUT
    description: Pause/activate a listing
    
  getOrders:
    path: /orders/search
    method: GET
    description: Search orders by various criteria
    
  getCategories:
    path: /sites/{siteId}/categories
    method: GET
    description: Get category tree for site

# Example payload templates
payloadTemplates:
  createListing:
    title: "{{productName}}"
    category_id: "{{categoryId}}"
    price: "{{price}}"
    currency_id: "{{currencyId}}"
    available_quantity: "{{quantity}}"
    buying_mode: buy_it_now
    condition: new
    listing_type_id: gold_special
    description:
      plain_text: "{{description}}"
    pictures:
      - source: "{{imageUrl}}"
    attributes:
      - id: BRAND
        value_name: "{{brandName}}"
      - id: MODEL
        value_name: "{{model}}"
    shipping:
      mode: me2
      free_shipping: false
      dimensions: "{{dimensions}}"
      
  updateStock:
    available_quantity: "{{quantity}}"
    
  updatePrice:
    price: "{{price}}"

# Field mapping suggestions (WMS â†’ MercadoLibre)
suggestedMappings:
  wms_to_mercadolibre:
    productName: $.Item.Description
    sku: $.Item.SKU
    price: $.Item.Price
    quantity: $.Item.Quantity
    categoryId: $.Item.CategoryId
    currencyId: BRL
    brandName: $.Item.Brand
    model: $.Item.Model
    description: $.Item.LongDescription
    weight: $.Item.Weight
    dimensions: 
      length: $.Item.Dimensions.Length
      width: $.Item.Dimensions.Width
      height: $.Item.Dimensions.Height

# Conditional Logic Schema (for interface-scoped conditions)
conditionSchema:
  fields:
    - name: listing_type_id
      type: string
      description: Listing type/tier
      values:
        - gold_special
        - gold_premium
        - gold
        - silver
        - bronze
        - free
    - name: price
      type: number
      description: Product listing price
    - name: available_quantity
      type: number
      description: Available stock quantity
    - name: condition
      type: string
      description: Product condition
      values:
        - new
        - used
        - refurbished
    - name: status
      type: string
      description: Listing status
      values:
        - active
        - paused
        - closed
    - name: site_id
      type: string
      description: MercadoLibre site/marketplace
      values:
        - MLB  # Brazil
        - MLM  # Mexico
        - MLA  # Argentina
        - MLC  # Chile
        - MCO  # Colombia
  
  rulePresets:
    - name: Premium Listings Only
      description: Filter for gold_special or gold_premium listings
      condition:
        field: listing_type_id
        operator: equals
        value: gold_special
    
    - name: Low Stock Alert
      description: Identify listings with low inventory
      condition:
        field: available_quantity
        operator: less_than
        value: 5
    
    - name: Brazil Market Only
      description: Filter for Brazil marketplace
      condition:
        field: site_id
        operator: equals
        value: MLB
    
    - name: Active Listings
      description: Filter only active listings
      condition:
        field: status
        operator: equals
        value: active

# Tags
tags:
  - marketplace
  - mercadolibre
  - ecommerce
  - latam
  - standard

# Metadata
metadata:
  vendor: MercadoLibre
  documentation: https://developers.mercadolibre.com/
  rateLimit: 10000 requests per hour
  regions:
    - Brazil (MLB)
    - Mexico (MLM)
    - Argentina (MLA)
    - Chile (MLC)
    - Colombia (MCO)
