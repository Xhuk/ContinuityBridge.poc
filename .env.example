# ============================================================================
# CONTINUITYBRIDGE - ENVIRONMENT VARIABLES
# ============================================================================
# Copy this file to .env and fill in your values
# For Render deployment: Set these as Environment Variables in Render Dashboard

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================

# Environment Mode
NODE_ENV=production

# Server Port (Render will set this automatically)
PORT=5000

# Deployment Type
# "platform" = Founder/Consultant platform (uses /sys/auth/bridge for login)
# "customer" = Customer deployment (uses /admin for login)
VITE_DEPLOYMENT_TYPE=platform

# App URL (REQUIRED for production)
# Render: Use your Render app URL (e.g., https://your-app.onrender.com)
APP_URL=https://continuitybridge.onrender.com

# ============================================================================
# DATABASE CONFIGURATION (REQUIRED)
# ============================================================================

# Database Type: "postgres" for Render (PostgreSQL)
DB_TYPE=postgres

# PostgreSQL Connection URL (REQUIRED for Render)
# Get from Neon, Supabase, or Render PostgreSQL add-on
# Format: postgresql://user:password@host:5432/database?sslmode=require
DATABASE_URL=postgresql://user:password@ep-xxx.us-east-2.aws.neon.tech/database?sslmode=require

# PostgreSQL Connection Pool Settings (Optional - for production tuning)
DB_POOL_MAX=20
DB_POOL_MIN=2
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000

# ============================================================================
# SECURITY CONFIGURATION (REQUIRED FOR PRODUCTION)
# ============================================================================

# Encryption Key (REQUIRED - 32 bytes hex)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=your-32-byte-hex-encryption-key-here

# JWT Secret (REQUIRED - 32 bytes hex)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-32-byte-hex-jwt-secret-here

# Superadmin API Key (REQUIRED - for founder access)
# Format: cb_[random string]
SUPERADMIN_API_KEY=cb_your_superadmin_api_key_here

# Additional Founder API Key (Optional)
FOUNDER_API_KEY=cb_your_second_api_key_here

# WAF Protection (Recommended for production)
WAF_ENABLED=true

# ============================================================================
# QUEUE BACKEND CONFIGURATION
# ============================================================================

# Queue Backend (inmemory recommended for Render free tier)
# Options: inmemory | rabbit | kafka
QUEUE_BACKEND=inmemory

# RabbitMQ Configuration (if using RabbitMQ)
# RABBITMQ_URL=amqp://user:password@host:5672

# Kafka Configuration (if using Kafka)
# KAFKA_BROKERS=broker1:9092,broker2:9092
# KAFKA_CLIENT_ID=continuitybridge

# ============================================================================
# CACHE CONFIGURATION (Optional - Valkey/Redis)
# ============================================================================

# Valkey/Redis Enabled (false for Render free tier)
VALKEY_ENABLED=false

# Valkey/Redis URL (if enabled)
# VALKEY_URL=redis://user:password@host:6379
# Or legacy Redis URL
# REDIS_URL=redis://user:password@host:6379

# ============================================================================
# AI EXPERT ADVISORS (Founder Only - Multi-AI Consensus)
# ============================================================================
# Get consensus from multiple AI providers for critical business decisions
# Supports: Finance, Infrastructure, Sales, Product, Security, Operations experts

# Google Gemini (Primary - Free tier: 15 req/min, 1500 req/day)
# Get your key from: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key-here

# OpenAI ChatGPT (Optional - for multi-AI consensus)
# Get your key from: https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-your-openai-key-here

# Anthropic Claude (Optional - for multi-AI consensus)
# Get your key from: https://console.anthropic.com/settings/keys
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# ============================================================================
# EMAIL CONFIGURATION (Optional - for notifications)
# ============================================================================

# Resend API Key (for transactional emails)
# Get from: https://resend.com/api-keys
RESEND_API_KEY=re_your_resend_api_key
EMAIL_FROM=noreply@continuitybridge.com

# SMTP Configuration (alternative to Resend)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@continuitybridge.com

# ============================================================================
# OAUTH CONFIGURATION (Optional - for SSO login)
# ============================================================================

# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# ============================================================================
# MONITORING & HEALTH CHECKS (Optional)
# ============================================================================

# Health Monitoring
HEALTH_MONITORING_ENABLED=true
HEALTH_ALERT_EMAILS=admin@continuitybridge.com
HEALTH_CHECK_INTERVAL_MINUTES=5

# Health Thresholds
HEALTH_ERROR_THRESHOLD=10
HEALTH_LATENCY_THRESHOLD=5000
HEALTH_MEMORY_THRESHOLD=85
HEALTH_DISK_THRESHOLD=90

# ============================================================================
# REMOTE UPDATES (Customer Deployments Only)
# ============================================================================

# Remote Updates (only for customer self-hosted deployments)
REMOTE_UPDATES_ENABLED=false
FOUNDER_PLATFORM_URL=https://continuitybridge.onrender.com
ORGANIZATION_ID=your-org-id
ENVIRONMENT=production
AUTO_UPDATE=false
UPDATE_CHANNEL=stable
UPDATE_CHECK_INTERVAL_HOURS=24

# ============================================================================
# GDPR & COMPLIANCE (Optional)
# ============================================================================

GDPR_CONTACT_EMAIL=privacy@continuitybridge.com

# ============================================================================
# ADVANCED CONFIGURATION (Optional)
# ============================================================================

# Code Protection (production only)
# Automatically enabled in production

# Runtime Version
RUNTIME_VERSION=2.0.0

# Organization ID (for platform deployment)
# ORGANIZATION_ID=default-org
